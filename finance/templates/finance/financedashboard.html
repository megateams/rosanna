{% extends 'finance/base.html' %}
{% block  title %} Dashboard {% endblock title %}
{% load static %}
{% block  main %}
<div class="inner-content">
    <div class="row ml-2" >
        <div class=" current-term mr-4">
                <a class=" btn-md btn-h text-white">Current Term: </a>
                <a  class=" btn-md btn-d text-white">Term I </a>
        </div>
        <div class=" current-year">
                <a class=" btn-md btn-h text-white">Current Year: </a>
                <a class=" btn-md btn-d text-white">2023 </a>
        </div>
    </div>
    <div class="row pt-4">
        <div class="col-md-3">
            <a href="/financefeeslist" style="text-decoration: none;">
                <div class="card feescard p-3">
                    <div class="row">
                        <div class="col-4 text-center pt-2" style="border-right: 2px solid #fff;">
                            <i class="fas fa-money-bill-wave icon circle-icon" ></i>
                        </div>
                        <div class="col-8 ">
                            <h5 class="text-center">{{ total_amount|default:"0" }}</h5>
                            <p class="text-center"> Fees</p> 
                        </div>
                    </div>
                   
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <a href="/financeteacherpaymentslist" style="text-decoration: none;">
                <div class="card trpaymentscard p-3">
                    <div class="row">
                        <div class="col-4 text-center pt-2" style="border-right: 2px solid #fff;">
                            <i class="fas fa-money-bill-alt icon circle-icon" ></i>
                        </div>
                        <div class="col-8 ">
                            <h5 class="text-center">{{ total_trpayments|default:"0" }}</h5>
                            <p class="text-center"> Teacher Payments</p> 
                        </div>
                    </div>
                   
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <a href="/financesupportstaffpaymentslist" style="text-decoration: none;">
                <div class="card sspaymentscard p-3">
                    <div class="row">
                        <div class="col-4 text-center pt-2" style="border-right: 2px solid #fff;">
                            <i class="fas fa-money-bill-alt icon circle-icon" ></i>
                        </div>
                        <div class="col-8 ">
                            <h5 class="text-center">{{ total_sspayments|default:"0" }}</h5>
                            <p class="text-center">  S-Staff Payments</p> 
                        </div>
                    </div>
                   
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <a href="/financeexpenseslist" style="text-decoration: none;">
                <div class="card expensecard p-3">
                    <div class="row">
                        <div class="col-4 text-center pt-2" style="border-right: 2px solid #fff;">
                            <i class="fas fa-money-bill-wave icon circle-icon" ></i>
                        </div>
                        <div class="col-8 ">
                            <h5 class="text-center">{{ total_amount_paid|default:"0" }}</h5> 
                            <p class="text-center"> Expenses</p> 
                        </div>
                    </div>
                   
                </div>
            </a>
        </div>
    </div>

    <!-- linegraph and donut -->
    <div class="row mt-4">
        <div class="col-lg-8 bar">
            <div class="line-chart shadow text-white pb-2">
                <canvas id="paymentChart"></canvas>
            </div>          
        </div>
        <div class="col-md-4 ">
            <div class="donut-chart shadow  bg-light pb-2">
                <canvas id="paymentDonutChart"></canvas>
            </div>
        </div>
    </div>
    
</div> 

<!-- Include Chart.js library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // line graph
    document.addEventListener("DOMContentLoaded", function() {
  var ctx = document.getElementById("paymentChart").getContext("2d");

  // Replace the static data arrays with context values
  var paymentData = {
    labels: {{fees_months|safe}},
    datasets: [
      {
        label: "Payments",
        data: {{ payments_total|safe }}, // Replace with the context variable
        fill: false,
        borderColor: "#007",
        borderWidth: 1,
        pointBackgroundColor: "#fff",
        pointRadius: 4,
        pointHoverRadius: 6,
      },
      {
        label: "Fees",
        data: {{ fees_total|safe }}, // Replace with the context variable
        fill: false,
        borderColor: "#0f0",
        borderWidth: 1,
        pointBackgroundColor: "#fff",
        pointRadius: 4,
        pointHoverRadius: 6,
      },
      {
        label: "Expenses",
        data: {{ expenses_total|safe }}, // Replace with the context variable
        fill: false,
        borderColor: "#f00",
        borderWidth: 1,
        pointBackgroundColor: "#fff",
        pointRadius: 4,
        pointHoverRadius: 6,
      },
    ],
  };

  var paymentChart = new Chart(ctx, {
    type: "line",
    data: paymentData,
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: {
          grid: {
            display: false,
          },
          ticks: {
            color: "black",
          },
        },
        y: {
          beginAtZero: true,
          grid: {
            color: "#999",
          },
          ticks: {
            stepSize: 500,
            color: "black",
          },
        },
      },
      plugins: {
        legend: {
          position: "top",
          labels: {
            color: "black",
          },
        },
        title: {
          display: true,
          color: "black",
          text: "Payment Overview",
        },
      },
    },
  });
});

// line graph

</script>
{% endblock main %} 
