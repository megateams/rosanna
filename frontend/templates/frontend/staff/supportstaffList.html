{% extends 'frontend/base.html' %}
{% block  title %} Support Staff List {% endblock title %}
{% block  pagetitle %} Support Staff List {% endblock pagetitle %}

{% block  main %} 

<!-- inner-content -->
<div class="inner-content">
    <div class="btns">
        <a href="/add-support-staff" class="btn btn-sm add-btn text-white mb-2 ml-3">Add support staff</a>
        <button onclick="confirmDownload()" class="btn btn-sm bg-success text-white mb-2 ml-2 ">Export excel</button>
    </div>
    <!-- Success message after data has been sent  -->
    {% if messages %}
    <ul class="messages">
    {% for message in messages %}
        <div class="alert alert-success alert-dismissible fade show" role="alert" {% if message.tags %} class="{{ message.tags }}"{% endif %}>
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <strong>{{ message }}</strong> 
        </div>
    {% endfor %}
    </ul>
    {% endif %}
    
    <div class="table-section" style="font-size: 14px;"> 
        
        <table class="table" id="table">
            <thead>
                <tr>
                    <th>Staff number</th>
                    <th>Fullname</th>
                    <th>Contact</th>
                    <th>Email</th>
                    <th>Address</th>
                    <th>Gender</th>
                    <th>Date of Birth</th>
                    <th>Qualifications</th>
                    <th>Position</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for staff in support_staff %}
                <tr>
                    <td>{{ staff.id }}</td>
                    <td>{{ staff.fullname }}</td>
                    <td>{{ staff.contact }}</td>
                    <td>{{ staff.email }}</td>
                    <td>{{ staff.address }}</td>
                    <td>{{ staff.gender }}</td>
                    <td>{{ staff.dob }}</td>
                    <td>{{ staff.qualification }}</td>
                    <td>{{ staff.position }}</td>
                    <td>
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Actions
                            </button>
                            <div class="dropdown-menu">
                                <a href="/deletesupportstaff/{{staff.id}}" class="dropdown-item btn btn-sm btn-primary text-danger">DELETE</a>
                                <a href="/editsupportstaff/{{staff.id}}" class="dropdown-item btn btn-sm btn-primary text-primary">EDIT</a>
                            </div>
                        </div>
                    </td>
                </tr>
                {% endfor %}  
            </tbody>
        </table>
    </div>
    <!-- student show -->
    <div class="show_support_staff">
        
    </div>
</div>

<!-- javascript code to alert the user before exporting the file-->
<script>
    function confirmDownload(){
        if(confirm("Are you sure you want to export the data to an Excel file?")){
            window.location.href = "{% url 'support_export_excel' %}"
        }
    }
</script>

<!-- inner-content -->
{% endblock main %}